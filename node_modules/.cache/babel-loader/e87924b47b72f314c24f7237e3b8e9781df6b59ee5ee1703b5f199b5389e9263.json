{"ast":null,"code":"import _regeneratorRuntime from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useNavigate}from'react-router-dom';import BackendApiRequest from\"../apis/backendApi\";import useLocalStorage from\"../hooks/useLocalStorage\";import NavBar from\"../NavBar\";import{AxiosError}from\"axios\";import'../css/RegisterForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var RegisterForm=function RegisterForm(_ref){var token=_ref.token,setToken=_ref.setToken;var _useLocalStorage=useLocalStorage(),_useLocalStorage2=_slicedToArray(_useLocalStorage,4),localStoreToken=_useLocalStorage2[0],localRemoveToken=_useLocalStorage2[1],localRetrieveToken=_useLocalStorage2[2],localDecodeToken=_useLocalStorage2[3];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var INITIAL_STATE={'username':'','password':'','firstName':'','lastName':'','email':''};var _useState3=useState(INITIAL_STATE),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var navigate=useNavigate();var handleChange=function handleChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setFormData(function(data){return _objectSpread(_objectSpread({},data),{},_defineProperty({},name,value));});};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(evt){var request,_token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:evt.preventDefault();_context.next=3;return BackendApiRequest.registerNewUser(formData);case 3:request=_context.sent;console.log(request);if(!(request instanceof AxiosError)){_context.next=10;break;}setError(request.response.data.message);return _context.abrupt(\"return\",'error');case 10:_token=request.data.token;setToken(_token);localStoreToken(_token);setFormData(INITIAL_STATE);navigate('/');case 15:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{id:\"register-form-main-container\",children:[/*#__PURE__*/_jsx(NavBar,{token:token,setToken:setToken}),/*#__PURE__*/_jsx(\"div\",{id:\"form-inner-container\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"form-container\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Register\"}),error?/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Registration error:\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"name-form-conatiner\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"name-subcontainer\",children:[/*#__PURE__*/_jsx(\"input\",{required:true,id:formData.firstName,type:\"text\",name:\"firstName\"// placeholder=\"first name\"\n,value:formData.firstName,onChange:handleChange,className:\"firstName\",onFocus:function onFocus(e){return e.target.placeholder='';}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",className:\"register-label\",children:\"First Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"name-subcontainer\",children:[/*#__PURE__*/_jsx(\"input\",{required:true,id:formData.lastName,type:\"text\",name:\"lastName\"// placeholder=\"last name\"\n,value:formData.lastName,onChange:handleChange,className:\"lastName\",onFocus:function onFocus(e){return e.target.placeholder='';}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",className:\"register-label\",children:\"Last Name\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"register-label\",children:\"Username: \"}),/*#__PURE__*/_jsx(\"input\",{required:true,id:formData.username,type:\"text\",name:\"username\"// placeholder=\"username\"\n,value:formData.username,onChange:handleChange,className:\"username\",onFocus:function onFocus(e){return e.target.placeholder='';}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"register-label\",children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{required:true,id:formData.password,type:\"text\",name:\"password\"// placeholder=\"password\"\n,value:formData.password,onChange:handleChange,className:\"password\",onFocus:function onFocus(e){return e.target.placeholder='';}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"register-label\",children:\"Email: \"}),/*#__PURE__*/_jsx(\"input\",{required:true,id:formData.email,type:\"email\",name:\"email\"// placeholder=\"email\"\n,value:formData.email,onChange:handleChange,className:\"email\",onFocus:function onFocus(e){return e.target.placeholder='';}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{id:\"submit-button\",children:\"Submit\"})]})]})})]});};export default RegisterForm;","map":{"version":3,"names":["React","useState","useNavigate","BackendApiRequest","useLocalStorage","NavBar","AxiosError","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RegisterForm","_ref","token","setToken","_useLocalStorage","_useLocalStorage2","_slicedToArray","localStoreToken","localRemoveToken","localRetrieveToken","localDecodeToken","_useState","_useState2","error","setError","INITIAL_STATE","_useState3","_useState4","formData","setFormData","navigate","handleChange","evt","_evt$target","target","name","value","data","_objectSpread","_defineProperty","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","request","_token","wrap","_callee$","_context","prev","next","preventDefault","registerNewUser","sent","console","log","response","message","abrupt","stop","_x","apply","arguments","id","children","className","onSubmit","required","firstName","type","onChange","onFocus","e","placeholder","htmlFor","lastName","username","password","email"],"sources":["/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/src/forms/RegisterForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from 'react-router-dom';\n\nimport BackendApiRequest from \"../apis/backendApi\";\nimport useLocalStorage from \"../hooks/useLocalStorage\";\nimport NavBar from \"../NavBar\";\n\nimport { AxiosError } from \"axios\";\n\nimport '../css/RegisterForm.css'\n\nconst RegisterForm = ({token, setToken}) => {\n\n  const [localStoreToken, localRemoveToken, localRetrieveToken, localDecodeToken] = useLocalStorage()\n  const [error, setError] = useState(null)\n\n  const INITIAL_STATE = {\n    'username': '',\n    'password': '',\n    'firstName': '',\n    'lastName': '',\n    'email': '',\n  }\n\n  const [formData, setFormData] = useState(INITIAL_STATE)\n  const navigate = useNavigate();\n\n  const handleChange = evt => {\n    const { name, value } = evt.target;\n    setFormData(data => ({\n      ...data,\n      [name]: value\n    }));\n  };\n\n\n  const handleSubmit = async (evt) => {\n    evt.preventDefault();\n    const request = await BackendApiRequest.registerNewUser(formData)\n    console.log(request)\n    if (request instanceof AxiosError) {\n      setError(request.response.data.message)\n      return 'error'\n    } else {\n      const token = request.data.token\n      setToken(token)\n      localStoreToken(token)\n      setFormData(INITIAL_STATE)\n      navigate('/')\n    }\n  }\n\n\n  return (\n    <div id=\"register-form-main-container\">\n      <NavBar\n        token={token}\n        setToken={setToken}\n      />\n      <div id=\"form-inner-container\">\n        <div id=\"form-container\">\n          <h4>Register</h4>\n          {error\n            ? <div className=\"error-container\">\n                <p>Registration error:</p>\n                <p>{error}</p>\n              </div>\n            : <></>\n          }\n          <form onSubmit={handleSubmit}>\n\n            <div className=\"name-form-conatiner\">\n              <div className=\"name-subcontainer\">\n                <input\n                  required\n                  id={formData.firstName}\n                  type=\"text\"\n                  name=\"firstName\"\n                  // placeholder=\"first name\"\n                  value={formData.firstName}\n                  onChange={handleChange}\n                  className='firstName'\n                  onFocus={(e) => e.target.placeholder = ''}\n                />\n                <label htmlFor=\"firstName\" className=\"register-label\">First Name</label>\n              </div>\n              <div className=\"name-subcontainer\">\n                <input\n                  required\n                  id={formData.lastName}\n                  type=\"text\"\n                  name=\"lastName\"\n                  // placeholder=\"last name\"\n                  value={formData.lastName}\n                  onChange={handleChange}\n                  className='lastName'\n                  onFocus={(e) => e.target.placeholder = ''}\n                />\n                <label htmlFor=\"lastName\" className=\"register-label\">Last Name</label>\n              </div>\n              \n            </div>\n            <br></br><br></br>\n\n            <label htmlFor=\"username\" className=\"register-label\">Username: </label>\n            <input\n              required\n              id={formData.username}\n              type=\"text\"\n              name=\"username\"\n              // placeholder=\"username\"\n              value={formData.username}\n              onChange={handleChange}\n              className='username'\n              onFocus={(e) => e.target.placeholder = ''}\n            /><br></br><br></br>\n\n            <label htmlFor=\"password\" className=\"register-label\">Password: </label>\n            <input\n              required\n              id={formData.password}\n              type=\"text\"\n              name=\"password\"\n              // placeholder=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              className='password'\n              onFocus={(e) => e.target.placeholder = ''}\n            /><br></br><br></br>\n\n            <label htmlFor=\"email\" className=\"register-label\">Email: </label>\n            <input\n              required\n              id={formData.email}\n              type=\"email\"\n              name=\"email\"\n              // placeholder=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              className='email'\n              onFocus={(e) => e.target.placeholder = ''}\n            /><br></br><br></br>\n\n            <button id=\"submit-button\">Submit</button>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default RegisterForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}