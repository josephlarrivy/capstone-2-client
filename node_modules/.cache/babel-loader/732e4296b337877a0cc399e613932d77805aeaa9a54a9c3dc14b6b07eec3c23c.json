{"ast":null,"code":"/*!\n * Connect - logger\n * Copyright(c) 2010 Sencha Inc.\n * Copyright(c) 2011 TJ Holowaychuk\n * MIT Licensed\n */\n\n/**\n * Log buffer.\n */\n\nvar buf = [];\n\n/**\n * Default log buffer duration.\n */\n\nvar defaultBufferDuration = 1000;\n\n/**\n * Log requests with the given `options` or a `format` string.\n *\n * Options:\n *\n *   - `format`  Format string, see below for tokens\n *   - `stream`  Output stream, defaults to _stdout_\n *   - `buffer`  Buffer duration, defaults to 1000ms when _true_\n *\n * Tokens:\n *\n *   - `:req[header]` ex: `:req[Accept]`\n *   - `:res[header]` ex: `:res[Content-Length]`\n *   - `:http-version`\n *   - `:response-time`\n *   - `:remote-addr`\n *   - `:date`\n *   - `:method`\n *   - `:url`\n *   - `:referrer`\n *   - `:user-agent`\n *   - `:status`\n *\n * @param {String|Function|Object} format or options\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function logger(options) {\n  if ('object' == typeof options) {\n    options = options || {};\n  } else if (options) {\n    options = {\n      format: options\n    };\n  } else {\n    options = {};\n  }\n  var fmt = options.format,\n    stream = options.stream || process.stdout,\n    buffer = options.buffer;\n\n  // buffering support\n  if (buffer) {\n    var realStream = stream,\n      interval = 'number' == typeof buffer ? buffer : defaultBufferDuration;\n\n    // flush interval\n    setInterval(function () {\n      if (buf.length) {\n        realStream.write(buf.join(''), 'ascii');\n        buf.length = 0;\n      }\n    }, interval);\n\n    // swap the stream\n    stream = {\n      write: function (str) {\n        buf.push(str);\n      }\n    };\n  }\n  return function logger(req, res, next) {\n    var start = +new Date(),\n      statusCode,\n      writeHead = res.writeHead,\n      end = res.end,\n      url = req.originalUrl;\n\n    // mount safety\n    if (req._logging) return next();\n\n    // flag as logging\n    req._logging = true;\n\n    // proxy for statusCode.\n    res.writeHead = function (code, headers) {\n      res.writeHead = writeHead;\n      res.writeHead(code, headers);\n      res.__statusCode = statusCode = code;\n      res.__headers = headers || {};\n    };\n\n    // proxy end to output a line to the provided logger.\n    if (fmt) {\n      res.end = function (chunk, encoding) {\n        res.end = end;\n        res.end(chunk, encoding);\n        res.responseTime = +new Date() - start;\n        if ('function' == typeof fmt) {\n          var line = fmt(req, res, function (str) {\n            return format(str, req, res);\n          });\n          if (line) stream.write(line + '\\n', 'ascii');\n        } else {\n          stream.write(format(fmt, req, res) + '\\n', 'ascii');\n        }\n      };\n    } else {\n      res.end = function (chunk, encoding) {\n        var contentLength = res._headers && res._headers['content-length'] || res.__headers && res.__headers['Content-Length'] || '-';\n        res.end = end;\n        res.end(chunk, encoding);\n        stream.write((req.socket && (req.socket.remoteAddress || req.socket.socket && req.socket.socket.remoteAddress)) + ' - - [' + new Date().toUTCString() + ']' + ' \"' + req.method + ' ' + url + ' HTTP/' + req.httpVersionMajor + '.' + req.httpVersionMinor + '\" ' + (statusCode || res.statusCode) + ' ' + contentLength + ' \"' + (req.headers['referer'] || req.headers['referrer'] || '') + '\" \"' + (req.headers['user-agent'] || '') + '\"\\n', 'ascii');\n      };\n    }\n    next();\n  };\n};\n\n/**\n * Return formatted log line.\n *\n * @param  {String} str\n * @param  {IncomingMessage} req\n * @param  {ServerResponse} res\n * @return {String}\n * @api private\n */\n\nfunction format(str, req, res) {\n  return str.replace(':url', req.originalUrl).replace(':method', req.method).replace(':status', res.__statusCode || res.statusCode).replace(':response-time', res.responseTime).replace(':date', new Date().toUTCString()).replace(':referrer', req.headers['referer'] || req.headers['referrer'] || '').replace(':http-version', req.httpVersionMajor + '.' + req.httpVersionMinor).replace(':remote-addr', req.socket && (req.socket.remoteAddress || req.socket.socket && req.socket.socket.remoteAddress)).replace(':user-agent', req.headers['user-agent'] || '').replace(/:req\\[([^\\]]+)\\]/g, function (_, field) {\n    return req.headers[field.toLowerCase()];\n  }).replace(/:res\\[([^\\]]+)\\]/g, function (_, field) {\n    return res._headers ? res._headers[field.toLowerCase()] || res.__headers[field] : res.__headers && res.__headers[field];\n  });\n}","map":{"version":3,"names":["buf","defaultBufferDuration","module","exports","logger","options","format","fmt","stream","process","stdout","buffer","realStream","interval","setInterval","length","write","join","str","push","req","res","next","start","Date","statusCode","writeHead","end","url","originalUrl","_logging","code","headers","__statusCode","__headers","chunk","encoding","responseTime","line","contentLength","_headers","socket","remoteAddress","toUTCString","method","httpVersionMajor","httpVersionMinor","replace","_","field","toLowerCase"],"sources":["/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/front-end/node_modules/facebook-sdk/node_modules/connect/lib/middleware/logger.js"],"sourcesContent":["\n/*!\n * Connect - logger\n * Copyright(c) 2010 Sencha Inc.\n * Copyright(c) 2011 TJ Holowaychuk\n * MIT Licensed\n */\n\n/**\n * Log buffer.\n */\n\nvar buf = [];\n\n/**\n * Default log buffer duration.\n */\n\nvar defaultBufferDuration = 1000;\n\n/**\n * Log requests with the given `options` or a `format` string.\n *\n * Options:\n *\n *   - `format`  Format string, see below for tokens\n *   - `stream`  Output stream, defaults to _stdout_\n *   - `buffer`  Buffer duration, defaults to 1000ms when _true_\n *\n * Tokens:\n *\n *   - `:req[header]` ex: `:req[Accept]`\n *   - `:res[header]` ex: `:res[Content-Length]`\n *   - `:http-version`\n *   - `:response-time`\n *   - `:remote-addr`\n *   - `:date`\n *   - `:method`\n *   - `:url`\n *   - `:referrer`\n *   - `:user-agent`\n *   - `:status`\n *\n * @param {String|Function|Object} format or options\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function logger(options) {\n  if ('object' == typeof options) {\n    options = options || {};\n  } else if (options) {\n    options = { format: options };\n  } else {\n    options = {};\n  }\n\n  var fmt = options.format\n    , stream = options.stream || process.stdout\n    , buffer = options.buffer;\n\n  // buffering support\n  if (buffer) {\n    var realStream = stream\n      , interval = 'number' == typeof buffer\n        ? buffer\n        : defaultBufferDuration;\n\n    // flush interval\n    setInterval(function(){\n      if (buf.length) {\n        realStream.write(buf.join(''), 'ascii');\n        buf.length = 0;\n      }\n    }, interval); \n\n    // swap the stream\n    stream = {\n      write: function(str){\n        buf.push(str);\n      }\n    };\n  }\n\n  return function logger(req, res, next) {\n    var start = +new Date\n      , statusCode\n      , writeHead = res.writeHead\n      , end = res.end\n      , url = req.originalUrl;\n\n    // mount safety\n    if (req._logging) return next();\n\n    // flag as logging\n    req._logging = true;\n\n    // proxy for statusCode.\n    res.writeHead = function(code, headers){\n      res.writeHead = writeHead;\n      res.writeHead(code, headers);\n      res.__statusCode = statusCode = code;\n      res.__headers = headers || {};\n    };\n\n    // proxy end to output a line to the provided logger.\n    if (fmt) {\n      res.end = function(chunk, encoding) {\n        res.end = end;\n        res.end(chunk, encoding);\n        res.responseTime = +new Date - start;\n        if ('function' == typeof fmt) {\n          var line = fmt(req, res, function(str){ return format(str, req, res); });\n          if (line) stream.write(line + '\\n', 'ascii');\n        } else {\n          stream.write(format(fmt, req, res) + '\\n', 'ascii');\n        }\n      };\n    } else {\n      res.end = function(chunk, encoding) {\n        var contentLength = (res._headers && res._headers['content-length'])\n          || (res.__headers && res.__headers['Content-Length'])\n          || '-';\n\n        res.end = end;\n        res.end(chunk, encoding);\n\n        stream.write((req.socket && (req.socket.remoteAddress || (req.socket.socket && req.socket.socket.remoteAddress)))\n           + ' - - [' + (new Date).toUTCString() + ']'\n           + ' \"' + req.method + ' ' + url\n           + ' HTTP/' + req.httpVersionMajor + '.' + req.httpVersionMinor + '\" '\n           + (statusCode || res.statusCode) + ' ' + contentLength\n           + ' \"' + (req.headers['referer'] || req.headers['referrer'] || '')\n           + '\" \"' + (req.headers['user-agent'] || '') + '\"\\n', 'ascii');\n      };\n    }\n\n    next();\n  };\n};\n\n/**\n * Return formatted log line.\n *\n * @param  {String} str\n * @param  {IncomingMessage} req\n * @param  {ServerResponse} res\n * @return {String}\n * @api private\n */\n \nfunction format(str, req, res) {\n  return str\n    .replace(':url', req.originalUrl)\n    .replace(':method', req.method)\n    .replace(':status', res.__statusCode || res.statusCode)\n    .replace(':response-time', res.responseTime)\n    .replace(':date', new Date().toUTCString())\n    .replace(':referrer', req.headers['referer'] || req.headers['referrer'] || '')\n    .replace(':http-version', req.httpVersionMajor + '.' + req.httpVersionMinor)\n    .replace(':remote-addr', req.socket && (req.socket.remoteAddress || (req.socket.socket && req.socket.socket.remoteAddress)))\n    .replace(':user-agent', req.headers['user-agent'] || '')\n    .replace(/:req\\[([^\\]]+)\\]/g, function(_, field){ return req.headers[field.toLowerCase()]; })\n    .replace(/:res\\[([^\\]]+)\\]/g, function(_, field){\n      return res._headers\n        ? (res._headers[field.toLowerCase()] || res.__headers[field])\n        : (res.__headers && res.__headers[field]);\n    });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}