{"ast":null,"code":"/*!\n * Connect - staticProvider\n * Copyright(c) 2010 Sencha Inc.\n * Copyright(c) 2011 TJ Holowaychuk\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\n\nvar fs = require('fs'),\n  join = require('path').join,\n  basename = require('path').basename,\n  utils = require('../utils'),\n  Buffer = require('buffer').Buffer,\n  parse = require('url').parse,\n  mime = require('mime');\n\n/**\n * Static file server with the given `root` path.\n *\n * Examples:\n *\n *     var oneDay = 86400000;\n *\n *     connect(\n *       connect.static(__dirname + '/public')\n *     ).listen(3000);\n *\n *     connect(\n *       connect.static(__dirname + '/public', { maxAge: oneDay })\n *     ).listen(3000);\n *\n * Options:\n *\n *    - `maxAge`   Browser cache maxAge in milliseconds. defaults to 0\n *    - `hidden`   Allow transfer of hidden files. defaults to false\n *\n * @param {String} root\n * @param {Object} options\n * @return {Function}\n * @api public\n */\n\nexports = module.exports = function static(root, options) {\n  options = options || {};\n\n  // root required\n  if (!root) throw new Error('static() root path required');\n  options.root = root;\n  return function static(req, res, next) {\n    options.path = req.url;\n    send(req, res, next, options);\n  };\n};\n\n/**\n * Expose mime module.\n */\n\nexports.mime = mime;\n\n/**\n * Respond with 403 \"Forbidden\".\n *\n * @param {ServerResponse} res\n * @api private\n */\n\nfunction forbidden(res) {\n  var body = 'Forbidden';\n  res.setHeader('Content-Type', 'text/plain');\n  res.setHeader('Content-Length', body.length);\n  res.statusCode = 403;\n  res.end(body);\n}\n\n/**\n * Respond with 416  \"Requested Range Not Satisfiable\"\n *\n * @param {ServerResponse} res\n * @api private\n */\n\nfunction invalidRange(res) {\n  var body = 'Requested Range Not Satisfiable';\n  res.setHeader('Content-Type', 'text/plain');\n  res.setHeader('Content-Length', body.length);\n  res.statusCode = 416;\n  res.end(body);\n}\n\n/**\n * Attempt to tranfer the requseted file to `res`.\n *\n * @param {ServerRequest}\n * @param {ServerResponse}\n * @param {Function} next\n * @param {Object} options\n * @api private\n */\n\nvar send = exports.send = function (req, res, next, options) {\n  options = options || {};\n  if (!options.path) throw new Error('path required');\n\n  // setup\n  var maxAge = options.maxAge || 0,\n    ranges = req.headers.range,\n    head = 'HEAD' == req.method,\n    root = options.root,\n    fn = options.callback,\n    hidden = options.hidden;\n\n  // replace next() with callback when available\n  if (fn) next = fn;\n\n  // ignore non-GET requests\n  if ('GET' != req.method && !head) return next();\n\n  // parse url\n  var url = parse(options.path),\n    path = decodeURIComponent(url.pathname),\n    type;\n\n  // potentially malicious path\n  if (~path.indexOf('..')) return fn ? fn(new Error('Forbidden')) : forbidden(res);\n\n  // join from optional root dir\n  path = join(options.root, path);\n\n  // index.html support\n  if ('/' == path[path.length - 1]) path += 'index.html';\n\n  // \"hidden\" file\n  if (!hidden && '.' == basename(path)[0]) return next();\n\n  // mime type\n  type = mime.lookup(path);\n  fs.stat(path, function (err, stat) {\n    // ignore ENOENT\n    if (err) {\n      if (fn) return fn(err);\n      return 'ENOENT' == err.code ? next() : next(err);\n      // ignore directories\n    } else if (stat.isDirectory()) {\n      return fn ? fn(new Error('Cannot Transfer Directory')) : next();\n    }\n\n    // we have a Range request\n    if (ranges) {\n      ranges = utils.parseRange(stat.size, ranges);\n      // valid\n      if (ranges) {\n        // TODO: stream options\n        // TODO: multiple support\n        var stream = fs.createReadStream(path, ranges[0]),\n          start = ranges[0].start,\n          end = ranges[0].end;\n        res.statusCode = 206;\n        res.setHeader('Content-Range', 'bytes ' + start + '-' + end + '/' + stat.size);\n        // invalid\n      } else {\n        return fn ? fn(new Error('Requested Range Not Satisfiable')) : invalidRange(res);\n      }\n      // stream the entire file\n    } else {\n      res.setHeader('Content-Length', stat.size);\n      res.setHeader('Cache-Control', 'public, max-age=' + maxAge / 1000);\n      res.setHeader('Last-Modified', stat.mtime.toUTCString());\n      res.setHeader('ETag', utils.etag(stat));\n\n      // conditional GET support\n      if (utils.conditionalGET(req)) {\n        if (!utils.modified(req, res)) {\n          return utils.notModified(res);\n        }\n      }\n\n      // read stream\n      var stream = fs.createReadStream(path);\n    }\n\n    // transfer\n    if (!res.getHeader('content-type')) {\n      var charset = mime.charsets.lookup(type);\n      res.setHeader('Content-Type', type + (charset ? '; charset=' + charset : ''));\n    }\n    res.setHeader('Accept-Ranges', 'bytes');\n    if (head) return res.end();\n    stream.pipe(res);\n    if (fn) {\n      res.connection.on('error', fn);\n      stream.on('end', fn);\n    }\n  });\n};","map":{"version":3,"names":["fs","require","join","basename","utils","Buffer","parse","mime","exports","module","static","root","options","Error","req","res","next","path","url","send","forbidden","body","setHeader","length","statusCode","end","invalidRange","maxAge","ranges","headers","range","head","method","fn","callback","hidden","decodeURIComponent","pathname","type","indexOf","lookup","stat","err","code","isDirectory","parseRange","size","stream","createReadStream","start","mtime","toUTCString","etag","conditionalGET","modified","notModified","getHeader","charset","charsets","pipe","connection","on"],"sources":["/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/front-end/node_modules/facebook-sdk/node_modules/connect/lib/middleware/static.js"],"sourcesContent":["\n/*!\n * Connect - staticProvider\n * Copyright(c) 2010 Sencha Inc.\n * Copyright(c) 2011 TJ Holowaychuk\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\n\nvar fs = require('fs')\n  , join = require('path').join\n  , basename = require('path').basename\n  , utils = require('../utils')\n  , Buffer = require('buffer').Buffer\n  , parse = require('url').parse\n  , mime = require('mime');\n\n/**\n * Static file server with the given `root` path.\n *\n * Examples:\n *\n *     var oneDay = 86400000;\n *\n *     connect(\n *       connect.static(__dirname + '/public')\n *     ).listen(3000);\n *\n *     connect(\n *       connect.static(__dirname + '/public', { maxAge: oneDay })\n *     ).listen(3000);\n *\n * Options:\n *\n *    - `maxAge`   Browser cache maxAge in milliseconds. defaults to 0\n *    - `hidden`   Allow transfer of hidden files. defaults to false\n *\n * @param {String} root\n * @param {Object} options\n * @return {Function}\n * @api public\n */\n\nexports = module.exports = function static(root, options){\n  options = options || {};\n\n  // root required\n  if (!root) throw new Error('static() root path required');\n  options.root = root;\n\n  return function static(req, res, next) {\n    options.path = req.url;\n    send(req, res, next, options);\n  };\n};\n\n/**\n * Expose mime module.\n */\n\nexports.mime = mime;\n\n/**\n * Respond with 403 \"Forbidden\".\n *\n * @param {ServerResponse} res\n * @api private\n */\n\nfunction forbidden(res) {\n  var body = 'Forbidden';\n  res.setHeader('Content-Type', 'text/plain');\n  res.setHeader('Content-Length', body.length);\n  res.statusCode = 403;\n  res.end(body);\n}\n\n/**\n * Respond with 416  \"Requested Range Not Satisfiable\"\n *\n * @param {ServerResponse} res\n * @api private\n */\n\nfunction invalidRange(res) {\n  var body = 'Requested Range Not Satisfiable';\n  res.setHeader('Content-Type', 'text/plain');\n  res.setHeader('Content-Length', body.length);\n  res.statusCode = 416;\n  res.end(body);\n}\n\n/**\n * Attempt to tranfer the requseted file to `res`.\n *\n * @param {ServerRequest}\n * @param {ServerResponse}\n * @param {Function} next\n * @param {Object} options\n * @api private\n */\n\nvar send = exports.send = function(req, res, next, options){\n  options = options || {};\n  if (!options.path) throw new Error('path required');\n\n  // setup\n  var maxAge = options.maxAge || 0\n    , ranges = req.headers.range\n    , head = 'HEAD' == req.method\n    , root = options.root\n    , fn = options.callback\n    , hidden = options.hidden;\n\n  // replace next() with callback when available\n  if (fn) next = fn;\n\n  // ignore non-GET requests\n  if ('GET' != req.method && !head) return next();\n\n  // parse url\n  var url = parse(options.path)\n    , path = decodeURIComponent(url.pathname)\n    , type;\n\n  // potentially malicious path\n  if (~path.indexOf('..')) return fn\n    ? fn(new Error('Forbidden'))\n    : forbidden(res);\n\n  // join from optional root dir\n  path = join(options.root, path);\n\n  // index.html support\n  if ('/' == path[path.length - 1]) path += 'index.html';\n\n  // \"hidden\" file\n  if (!hidden && '.' == basename(path)[0]) return next();\n\n  // mime type\n  type = mime.lookup(path);\n\n  fs.stat(path, function(err, stat){\n    // ignore ENOENT\n    if (err) {\n      if (fn) return fn(err);\n      return 'ENOENT' == err.code\n        ? next()\n        : next(err);\n    // ignore directories\n    } else if (stat.isDirectory()) {\n      return fn\n        ? fn(new Error('Cannot Transfer Directory'))\n        : next();\n    }\n\n    // we have a Range request\n    if (ranges) {\n      ranges = utils.parseRange(stat.size, ranges);\n      // valid\n      if (ranges) {\n        // TODO: stream options\n        // TODO: multiple support\n        var stream = fs.createReadStream(path, ranges[0])\n          , start = ranges[0].start\n          , end = ranges[0].end;\n        res.statusCode = 206;\n        res.setHeader('Content-Range', 'bytes '\n          + start\n          + '-'\n          + end\n          + '/'\n          + stat.size);\n      // invalid\n      } else {\n        return fn\n          ? fn(new Error('Requested Range Not Satisfiable'))\n          : invalidRange(res);\n      }\n    // stream the entire file\n    } else {\n      res.setHeader('Content-Length', stat.size);\n      res.setHeader('Cache-Control', 'public, max-age=' + (maxAge / 1000));\n      res.setHeader('Last-Modified', stat.mtime.toUTCString());\n      res.setHeader('ETag', utils.etag(stat));\n\n      // conditional GET support\n      if (utils.conditionalGET(req)) {\n        if (!utils.modified(req, res)) {\n          return utils.notModified(res);\n        }\n      }\n\n      // read stream\n      var stream = fs.createReadStream(path);\n    }\n\n    // transfer\n    if (!res.getHeader('content-type')) {\n      var charset = mime.charsets.lookup(type);\n      res.setHeader('Content-Type', type + (charset ? '; charset=' + charset : ''));\n    }\n    res.setHeader('Accept-Ranges', 'bytes');\n\n    if (head) return res.end();\n    stream.pipe(res);\n    if (fn) {\n      res.connection.on('error', fn);\n      stream.on('end', fn);\n    }\n  });\n};"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}