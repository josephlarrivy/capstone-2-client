{"ast":null,"code":"import _regeneratorRuntime from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useNavigate}from'react-router-dom';import BackendApiRequest from\"../apis/backendApi\";import useLocalStorage from\"../hooks/useLocalStorage\";import NavBar from\"../NavBar\";import{AxiosError}from\"axios\";import'../css/RegisterForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegisterForm=function RegisterForm(_ref){var token=_ref.token,setToken=_ref.setToken;var _useLocalStorage=useLocalStorage(),_useLocalStorage2=_slicedToArray(_useLocalStorage,4),localStoreToken=_useLocalStorage2[0],localRemoveToken=_useLocalStorage2[1],localRetrieveToken=_useLocalStorage2[2],localDecodeToken=_useLocalStorage2[3];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var INITIAL_STATE={'username':'','password':'','firstName':'','lastName':'','email':''};var _useState3=useState(INITIAL_STATE),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var navigate=useNavigate();var handleChange=function handleChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setFormData(function(data){return _objectSpread(_objectSpread({},data),{},_defineProperty({},name,value));});};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(evt){var request,_token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:evt.preventDefault();_context.next=3;return BackendApiRequest.registerNewUser(formData);case 3:request=_context.sent;console.log(request);if(!(request instanceof AxiosError)){_context.next=10;break;}setError(request.response.data.message);return _context.abrupt(\"return\",'error');case 10:_token=request.data.token;setToken(_token);localStoreToken(_token);setFormData(INITIAL_STATE);navigate('/');case 15:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{id:\"register-form-main-container\",children:[/*#__PURE__*/_jsx(NavBar,{token:token,setToken:setToken}),/*#__PURE__*/_jsx(\"div\",{id:\"form-inner-container\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"form-container\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Register\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Registration error:\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"name-form-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"name-subcontainer\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",className:\"register-label\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{required:true,id:\"firstName\",type:\"text\",name:\"firstName\",value:formData.firstName,onChange:handleChange,className:\"register-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"name-subcontainer\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",className:\"register-label\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{required:true,id:\"lastName\",type:\"text\",name:\"lastName\",value:formData.lastName,onChange:handleChange,className:\"register-input\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"register-label\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{required:true,id:\"username\",type:\"text\",name:\"username\",value:formData.username,onChange:handleChange,className:\"register-input\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"register-label\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{required:true,id:\"password\",type:\"password\",name:\"password\",value:formData.password,onChange:handleChange,className:\"register-input\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"register-label\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{required:true,id:\"email\",type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,className:\"register-input\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{id:\"submit-button\",children:\"Submit\"})]})]})})]});};export default RegisterForm;","map":{"version":3,"names":["React","useState","useNavigate","BackendApiRequest","useLocalStorage","NavBar","AxiosError","jsx","_jsx","jsxs","_jsxs","RegisterForm","_ref","token","setToken","_useLocalStorage","_useLocalStorage2","_slicedToArray","localStoreToken","localRemoveToken","localRetrieveToken","localDecodeToken","_useState","_useState2","error","setError","INITIAL_STATE","_useState3","_useState4","formData","setFormData","navigate","handleChange","evt","_evt$target","target","name","value","data","_objectSpread","_defineProperty","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","request","_token","wrap","_callee$","_context","prev","next","preventDefault","registerNewUser","sent","console","log","response","message","abrupt","stop","_x","apply","arguments","id","children","className","onSubmit","htmlFor","required","type","firstName","onChange","lastName","username","password","email"],"sources":["/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/src/forms/RegisterForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from 'react-router-dom';\n\nimport BackendApiRequest from \"../apis/backendApi\";\nimport useLocalStorage from \"../hooks/useLocalStorage\";\nimport NavBar from \"../NavBar\";\n\nimport { AxiosError } from \"axios\";\n\nimport '../css/RegisterForm.css'\n\nconst RegisterForm = ({token, setToken}) => {\n\n  const [localStoreToken, localRemoveToken, localRetrieveToken, localDecodeToken] = useLocalStorage()\n  const [error, setError] = useState(null)\n\n  const INITIAL_STATE = {\n    'username': '',\n    'password': '',\n    'firstName': '',\n    'lastName': '',\n    'email': '',\n  }\n\n  const [formData, setFormData] = useState(INITIAL_STATE)\n  const navigate = useNavigate();\n\n  const handleChange = evt => {\n    const { name, value } = evt.target;\n    setFormData(data => ({\n      ...data,\n      [name]: value\n    }));\n  };\n\n\n  const handleSubmit = async (evt) => {\n    evt.preventDefault();\n    const request = await BackendApiRequest.registerNewUser(formData)\n    console.log(request)\n    if (request instanceof AxiosError) {\n      setError(request.response.data.message)\n      return 'error'\n    } else {\n      const token = request.data.token\n      setToken(token)\n      localStoreToken(token)\n      setFormData(INITIAL_STATE)\n      navigate('/')\n    }\n  }\n\n\n  return (\n    <div id=\"register-form-main-container\">\n      <NavBar token={token} setToken={setToken} />\n      <div id=\"form-inner-container\">\n        <div id=\"form-container\">\n          <h4>Register</h4>\n          {error && (\n            <div className=\"error-container\">\n              <p>Registration error:</p>\n              <p>{error}</p>\n            </div>\n          )}\n          <form onSubmit={handleSubmit}>\n            <div className=\"name-form-container\">\n              <div className=\"name-subcontainer\">\n                <label htmlFor=\"firstName\" className=\"register-label\">\n                  First Name\n                </label>\n                <input\n                  required\n                  id=\"firstName\"\n                  type=\"text\"\n                  name=\"firstName\"\n                  value={formData.firstName}\n                  onChange={handleChange}\n                  className=\"register-input\"\n                />\n              </div>\n              <div className=\"name-subcontainer\">\n                <label htmlFor=\"lastName\" className=\"register-label\">\n                  Last Name\n                </label>\n                <input\n                  required\n                  id=\"lastName\"\n                  type=\"text\"\n                  name=\"lastName\"\n                  value={formData.lastName}\n                  onChange={handleChange}\n                  className=\"register-input\"\n                />\n              </div>\n            </div>\n            <br />\n            <label htmlFor=\"username\" className=\"register-label\">\n              Username:\n            </label>\n            <input\n              required\n              id=\"username\"\n              type=\"text\"\n              name=\"username\"\n              value={formData.username}\n              onChange={handleChange}\n              className=\"register-input\"\n            />\n            <br />\n            <label htmlFor=\"password\" className=\"register-label\">\n              Password:\n            </label>\n            <input\n              required\n              id=\"password\"\n              type=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              className=\"register-input\"\n            />\n            <br />\n            <label htmlFor=\"email\" className=\"register-label\">\n              Email:\n            </label>\n            <input\n              required\n              id=\"email\"\n              type=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              className=\"register-input\"\n            />\n            <br />\n            <br />\n            <button id=\"submit-button\">Submit</button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n\n}\n\nexport default RegisterForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}