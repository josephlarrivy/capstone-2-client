{"ast":null,"code":"import _regeneratorRuntime from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import NavBar from\"../NavBar\";import useLocalStorage from\"../hooks/useLocalStorage\";import TripNameForm from\"../forms/TripNameForm\";import BackendApiRequest from\"../apis/backendApi\";import{Link,useNavigate}from\"react-router-dom\";import'../css/MyTrips.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyTrips=function MyTrips(_ref){var token=_ref.token,setToken=_ref.setToken;var _useLocalStorage=useLocalStorage(),_useLocalStorage2=_slicedToArray(_useLocalStorage,4),localStoreToken=_useLocalStorage2[0],localRemoveToken=_useLocalStorage2[1],localRetrieveToken=_useLocalStorage2[2],localDecodeToken=_useLocalStorage2[3];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),trips=_useState4[0],setTrips=_useState4[1];var navigate=useNavigate();var getTrips=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return BackendApiRequest.getUserTrips(username);case 2:data=_context.sent;console.log(data);setTrips(data);case 5:case\"end\":return _context.stop();}},_callee);}));return function getTrips(){return _ref2.apply(this,arguments);};}();useEffect(function(){var getUsername=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var token;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return localDecodeToken();case 2:token=_context2.sent;setUsername(token.username);case 4:case\"end\":return _context2.stop();}},_callee2);}));return function getUsername(){return _ref3.apply(this,arguments);};}();getUsername();},[]);useEffect(function(){if(username){getTrips();}},[username]);var deleteTrip=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(tripname){var resp,_getTrips;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return BackendApiRequest.deleteTrip(tripname);case 2:resp=_context4.sent;if(resp.status===202){_getTrips=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return BackendApiRequest.getUserTrips(username);case 2:data=_context3.sent;console.log(data);setTrips(data);case 5:case\"end\":return _context3.stop();}},_callee3);}));return function _getTrips(){return _ref5.apply(this,arguments);};}();_getTrips();}case 4:case\"end\":return _context4.stop();}},_callee4);}));return function deleteTrip(_x){return _ref4.apply(this,arguments);};}();var viewTripDetails=function viewTripDetails(tripname){navigate(\"/tripDetails/\".concat(tripname));};return/*#__PURE__*/_jsxs(\"div\",{id:\"my-trips-main-container\",children:[/*#__PURE__*/_jsx(NavBar,{token:token,setToken:setToken}),/*#__PURE__*/_jsxs(\"div\",{id:\"my-trips-page-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Trips\"}),/*#__PURE__*/_jsx(\"div\",{id:\"trip-name-form\",children:/*#__PURE__*/_jsx(TripNameForm,{getTrips:getTrips})}),/*#__PURE__*/_jsx(\"div\",{id:\"trip-list-container\",children:trips&&trips.map(function(trip){return/*#__PURE__*/_jsxs(\"div\",{className:\"trip-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"trip-name-container\",children:/*#__PURE__*/_jsx(\"h4\",{children:trip.tripname})}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-container\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){viewTripDetails(\"\".concat(trip.id,\"/\").concat(trip.tripname));},children:\"view trip\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){deleteTrip(trip.tripname);},children:\"delete trip\"})]})]},trip.tripname);})})]})]});};export default MyTrips;","map":{"version":3,"names":["React","useState","useEffect","NavBar","useLocalStorage","TripNameForm","BackendApiRequest","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","MyTrips","_ref","token","setToken","_useLocalStorage","_useLocalStorage2","_slicedToArray","localStoreToken","localRemoveToken","localRetrieveToken","localDecodeToken","_useState","_useState2","username","setUsername","_useState3","_useState4","trips","setTrips","navigate","getTrips","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_callee$","_context","prev","next","getUserTrips","sent","console","log","stop","apply","arguments","getUsername","_ref3","_callee2","_callee2$","_context2","deleteTrip","_ref4","_callee4","tripname","resp","_getTrips","_callee4$","_context4","status","_ref5","_callee3","_callee3$","_context3","_x","viewTripDetails","concat","id","children","map","trip","className","onClick"],"sources":["/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/src/components/MyTrips.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport NavBar from \"../NavBar\";\nimport useLocalStorage from \"../hooks/useLocalStorage\";\nimport TripNameForm from \"../forms/TripNameForm\";\nimport BackendApiRequest from \"../apis/backendApi\";\nimport { Link, useNavigate } from \"react-router-dom\";\n\nimport '../css/MyTrips.css'\n\nconst MyTrips = ({token, setToken}) => {\n\n  const [localStoreToken, localRemoveToken, localRetrieveToken, localDecodeToken] = useLocalStorage()\n  const [username, setUsername] = useState(null)\n  const [trips, setTrips] = useState(null)\n  const navigate = useNavigate()\n\n  const getTrips = async () => {\n    const data = await BackendApiRequest.getUserTrips(username)\n    console.log(data)\n    setTrips(data)\n  }\n  \n  useEffect(() => {\n    const getUsername = async () => {\n      const token = await localDecodeToken()\n      setUsername(token.username)\n    }\n    getUsername()\n  }, [])\n  \n  useEffect(() => {\n    if (username) {\n      getTrips()\n    }\n  }, [username])\n\n  const deleteTrip = async (tripname) => {\n    const resp = await BackendApiRequest.deleteTrip(tripname)\n    if (resp.status === 202) {\n      const getTrips = async () => {\n        const data = await BackendApiRequest.getUserTrips(username)\n        console.log(data)\n        setTrips(data)\n      }\n      getTrips()\n    }\n  }\n\n  const viewTripDetails = (tripname) => {\n    navigate(`/tripDetails/${tripname}`)\n  }\n\n\n  return (\n    <div id=\"my-trips-main-container\">\n      <NavBar \n        token={token}\n        setToken={setToken}\n      />\n      <div id=\"my-trips-page-container\">\n        <h1>My Trips</h1>\n        <div id=\"trip-name-form\">\n          <TripNameForm getTrips={getTrips}/>\n        </div>\n        <div id=\"trip-list-container\">\n          {trips && trips.map(trip => {\n            return (\n              <div key={trip.tripname} className=\"trip-container\">\n                  <div className=\"trip-name-container\">\n                    <h4>{trip.tripname}</h4>\n                  </div>\n                  <div className=\"buttons-container\">\n                    <button onClick={() => { viewTripDetails(`${trip.id}/${trip.tripname}`) }}>view trip</button>\n                    <button onClick={() => { deleteTrip(trip.tripname) }}>delete trip</button>\n                  </div>\n              </div>\n            )\n          })\n\n          }\n        </div>\n        \n      </div>\n      \n    </div>\n  )\n}\n\nexport default MyTrips;"],"mappings":"giBAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CAChD,MAAO,CAAAC,MAAM,KAAM,WAAW,CAC9B,MAAO,CAAAC,eAAe,KAAM,0BAA0B,CACtD,MAAO,CAAAC,YAAY,KAAM,uBAAuB,CAChD,MAAO,CAAAC,iBAAiB,KAAM,oBAAoB,CAClD,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CAEpD,MAAO,oBAAoB,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE3B,GAAM,CAAAC,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAAC,IAAA,CAA0B,IAArB,CAAAC,KAAK,CAAAD,IAAA,CAALC,KAAK,CAAEC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CAE/B,IAAAC,gBAAA,CAAkFb,eAAe,EAAE,CAAAc,iBAAA,CAAAC,cAAA,CAAAF,gBAAA,IAA5FG,eAAe,CAAAF,iBAAA,IAAEG,gBAAgB,CAAAH,iBAAA,IAAEI,kBAAkB,CAAAJ,iBAAA,IAAEK,gBAAgB,CAAAL,iBAAA,IAC9E,IAAAM,SAAA,CAAgCvB,QAAQ,CAAC,IAAI,CAAC,CAAAwB,UAAA,CAAAN,cAAA,CAAAK,SAAA,IAAvCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,IAAAG,UAAA,CAA0B3B,QAAQ,CAAC,IAAI,CAAC,CAAA4B,UAAA,CAAAV,cAAA,CAAAS,UAAA,IAAjCE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,GAAM,CAAAG,QAAQ,CAAGxB,WAAW,EAAE,CAE9B,GAAM,CAAAyB,QAAQ,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,IAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACI,CAAAtC,iBAAiB,CAACuC,YAAY,CAACnB,QAAQ,CAAC,QAArDa,IAAI,CAAAG,QAAA,CAAAI,IAAA,CACVC,OAAO,CAACC,GAAG,CAACT,IAAI,CAAC,CACjBR,QAAQ,CAACQ,IAAI,CAAC,yBAAAG,QAAA,CAAAO,IAAA,MAAAX,OAAA,GACf,kBAJK,CAAAL,QAAQA,CAAA,SAAAC,KAAA,CAAAgB,KAAA,MAAAC,SAAA,OAIb,CAEDjD,SAAS,CAAC,UAAM,CACd,GAAM,CAAAkD,WAAW,6BAAAC,KAAA,CAAAlB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAiB,SAAA,MAAAvC,KAAA,QAAAqB,mBAAA,GAAAI,IAAA,UAAAe,UAAAC,SAAA,iBAAAA,SAAA,CAAAb,IAAA,CAAAa,SAAA,CAAAZ,IAAA,SAAAY,SAAA,CAAAZ,IAAA,SACE,CAAArB,gBAAgB,EAAE,QAAhCR,KAAK,CAAAyC,SAAA,CAAAV,IAAA,CACXnB,WAAW,CAACZ,KAAK,CAACW,QAAQ,CAAC,yBAAA8B,SAAA,CAAAP,IAAA,MAAAK,QAAA,GAC5B,kBAHK,CAAAF,WAAWA,CAAA,SAAAC,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAGhB,CACDC,WAAW,EAAE,CACf,CAAC,CAAE,EAAE,CAAC,CAENlD,SAAS,CAAC,UAAM,CACd,GAAIwB,QAAQ,CAAE,CACZO,QAAQ,EAAE,CACZ,CACF,CAAC,CAAE,CAACP,QAAQ,CAAC,CAAC,CAEd,GAAM,CAAA+B,UAAU,6BAAAC,KAAA,CAAAvB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAsB,SAAOC,QAAQ,MAAAC,IAAA,CAAAC,SAAA,QAAA1B,mBAAA,GAAAI,IAAA,UAAAuB,UAAAC,SAAA,iBAAAA,SAAA,CAAArB,IAAA,CAAAqB,SAAA,CAAApB,IAAA,SAAAoB,SAAA,CAAApB,IAAA,SACb,CAAAtC,iBAAiB,CAACmD,UAAU,CAACG,QAAQ,CAAC,QAAnDC,IAAI,CAAAG,SAAA,CAAAlB,IAAA,CACV,GAAIe,IAAI,CAACI,MAAM,GAAK,GAAG,CAAE,CACjBhC,SAAQ,6BAAAiC,KAAA,CAAA/B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAA8B,SAAA,MAAA5B,IAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAA4B,UAAAC,SAAA,iBAAAA,SAAA,CAAA1B,IAAA,CAAA0B,SAAA,CAAAzB,IAAA,SAAAyB,SAAA,CAAAzB,IAAA,SACI,CAAAtC,iBAAiB,CAACuC,YAAY,CAACnB,QAAQ,CAAC,QAArDa,IAAI,CAAA8B,SAAA,CAAAvB,IAAA,CACVC,OAAO,CAACC,GAAG,CAACT,IAAI,CAAC,CACjBR,QAAQ,CAACQ,IAAI,CAAC,yBAAA8B,SAAA,CAAApB,IAAA,MAAAkB,QAAA,GACf,kBAJK,CAAAlC,SAAQA,CAAA,SAAAiC,KAAA,CAAAhB,KAAA,MAAAC,SAAA,QAKdlB,SAAQ,EAAE,CACZ,CAAC,wBAAA+B,SAAA,CAAAf,IAAA,MAAAU,QAAA,GACF,kBAVK,CAAAF,UAAUA,CAAAa,EAAA,SAAAZ,KAAA,CAAAR,KAAA,MAAAC,SAAA,OAUf,CAED,GAAM,CAAAoB,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIX,QAAQ,CAAK,CACpC5B,QAAQ,iBAAAwC,MAAA,CAAiBZ,QAAQ,EAAG,CACtC,CAAC,CAGD,mBACEhD,KAAA,QAAK6D,EAAE,CAAC,yBAAyB,CAAAC,QAAA,eAC/BhE,IAAA,CAACP,MAAM,EACLY,KAAK,CAAEA,KAAM,CACbC,QAAQ,CAAEA,QAAS,EACnB,cACFJ,KAAA,QAAK6D,EAAE,CAAC,yBAAyB,CAAAC,QAAA,eAC/BhE,IAAA,OAAAgE,QAAA,CAAI,UAAQ,EAAK,cACjBhE,IAAA,QAAK+D,EAAE,CAAC,gBAAgB,CAAAC,QAAA,cACtBhE,IAAA,CAACL,YAAY,EAAC4B,QAAQ,CAAEA,QAAS,EAAE,EAC/B,cACNvB,IAAA,QAAK+D,EAAE,CAAC,qBAAqB,CAAAC,QAAA,CAC1B5C,KAAK,EAAIA,KAAK,CAAC6C,GAAG,CAAC,SAAAC,IAAI,CAAI,CAC1B,mBACEhE,KAAA,QAAyBiE,SAAS,CAAC,gBAAgB,CAAAH,QAAA,eAC/ChE,IAAA,QAAKmE,SAAS,CAAC,qBAAqB,CAAAH,QAAA,cAClChE,IAAA,OAAAgE,QAAA,CAAKE,IAAI,CAAChB,QAAQ,EAAM,EACpB,cACNhD,KAAA,QAAKiE,SAAS,CAAC,mBAAmB,CAAAH,QAAA,eAChChE,IAAA,WAAQoE,OAAO,CAAE,SAAAA,QAAA,CAAM,CAAEP,eAAe,IAAAC,MAAA,CAAII,IAAI,CAACH,EAAE,MAAAD,MAAA,CAAII,IAAI,CAAChB,QAAQ,EAAG,CAAC,CAAE,CAAAc,QAAA,CAAC,WAAS,EAAS,cAC7FhE,IAAA,WAAQoE,OAAO,CAAE,SAAAA,QAAA,CAAM,CAAErB,UAAU,CAACmB,IAAI,CAAChB,QAAQ,CAAC,CAAC,CAAE,CAAAc,QAAA,CAAC,aAAW,EAAS,GACtE,GAPAE,IAAI,CAAChB,QAAQ,CAQjB,CAEV,CAAC,CAAC,EAGE,GAEF,GAEF,CAEV,CAAC,CAED,cAAe,CAAA/C,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}