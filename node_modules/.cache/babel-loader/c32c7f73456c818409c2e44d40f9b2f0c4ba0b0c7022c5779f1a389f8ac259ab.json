{"ast":null,"code":"import _regeneratorRuntime from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _createForOfIteratorHelper from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useParams}from'react-router-dom';import'../css/Events.css';import AddToTripDropdown from\"./AddToTripDropdown\";import NParksServiceRequest from'../apis/nationalParksApi';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Events=function Events(_ref){var stateName=_ref.stateName,data=_ref.data;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),siteCodesData=_useState2[0],setSiteCodesData=_useState2[1];var _useParams=useParams(),type=_useParams.type,USstate=_useParams.USstate;useEffect(function(){console.log(data);console.log(USstate);},[]);useEffect(function(){var siteCodesArray=[];var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(!siteCodesArray.includes(item.sitecode))siteCodesArray.push(item.sitecode);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var siteCodes=[];var getParkData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _i,_siteCodesArray,item,latLng;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(siteCodesArray);_i=0,_siteCodesArray=siteCodesArray;case 2:if(!(_i<_siteCodesArray.length)){_context.next=11;break;}item=_siteCodesArray[_i];_context.next=6;return NParksServiceRequest.getParkLatLong(item);case 6:latLng=_context.sent;siteCodes.push({'code':item,'lat':latLng.latitude,'lon':latLng.longitude});case 8:_i++;_context.next=2;break;case 11:console.log(siteCodes);setSiteCodesData(siteCodes);case 13:case\"end\":return _context.stop();}},_callee);}));return function getParkData(){return _ref2.apply(this,arguments);};}();getParkData();},[data]);function convertDate(dateStr){var date=new Date(dateStr);var options={year:'numeric',month:'long',day:'numeric'};var formattedDate=date.toLocaleDateString('en-US',options);var _formattedDate$split=formattedDate.split(' '),_formattedDate$split2=_slicedToArray(_formattedDate$split,3),month=_formattedDate$split2[0],day=_formattedDate$split2[1],year=_formattedDate$split2[2];return{month:month,day:parseInt(day),year:parseInt(year)};}return/*#__PURE__*/_jsxs(\"div\",{id:\"events-main-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Events in \",stateName]}),data&&siteCodesData&&data.map(function(item){var formattedDate=convertDate(item.date);var location=siteCodesData.find(function(l){return l.code===item.sitecode;});var lat=location.lat;var lon=location.lon;return/*#__PURE__*/_jsxs(\"div\",{className:\"events-item-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"events-item-date\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"event-month\",children:formattedDate.month}),/*#__PURE__*/_jsx(\"p\",{className:\"event-day\",children:formattedDate.day}),/*#__PURE__*/_jsx(\"p\",{className:\"event-year\",children:formattedDate.year}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"event-times\",children:item.times[0].timestart}),/*#__PURE__*/_jsx(\"div\",{className:\"add-to-trip-dropdown\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"events-item-container-main\",children:[item.images.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"events-item-image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://www.nps.gov\".concat(item.images[0].url)})}):/*#__PURE__*/_jsxs(\"div\",{className:\"events-item-image-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:require('../images/black.png')}),/*#__PURE__*/_jsx(\"p\",{children:\"no image\"})]}),/*#__PURE__*/_jsx(\"h4\",{children:item.title}),/*#__PURE__*/_jsx(\"p\",{children:item.parkfullname}),item.location?/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Location:\"}),\" \",item.location]}):/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Location:\"}),\" See details\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"event-times\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Time:\"}),\" \",item.times[0].timestart,\" - \",item.times[0].timeend]}),item.timeinfo?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Time details: \",item.timeinfo]})]}):/*#__PURE__*/_jsx(\"p\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"events-item-container-other\",children:[item.isfree?/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Cost:\"}),\" Free\"]}):/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Cost:\"}),\" Not Free\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Category:\"}),\" \",item.category]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Types:\"}),\" \",item.types&&/*#__PURE__*/_jsx(\"span\",{children:item.types.join(\", \")})]})]})]},item.id);})]});};export default Events;","map":{"version":3,"names":["React","useState","useEffect","useParams","AddToTripDropdown","NParksServiceRequest","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Events","_ref","stateName","data","_useState","_useState2","_slicedToArray","siteCodesData","setSiteCodesData","_useParams","type","USstate","console","log","siteCodesArray","_iterator","_createForOfIteratorHelper","_step","s","n","done","item","value","includes","sitecode","push","err","e","f","siteCodes","getParkData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_i","_siteCodesArray","latLng","wrap","_callee$","_context","prev","next","length","getParkLatLong","sent","latitude","longitude","stop","apply","arguments","convertDate","dateStr","date","Date","options","year","month","day","formattedDate","toLocaleDateString","_formattedDate$split","split","_formattedDate$split2","parseInt","id","children","map","location","find","l","code","lat","lon","className","times","timestart","images","src","concat","url","require","title","parkfullname","timeend","timeinfo","isfree","category","types","join"],"sources":["/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/src/components/Events.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport { useParams } from 'react-router-dom';\n\nimport '../css/Events.css'\nimport AddToTripDropdown from \"./AddToTripDropdown\";\nimport NParksServiceRequest from '../apis/nationalParksApi'\n\nconst Events = ({stateName, data}) => {\n\n  const [siteCodesData, setSiteCodesData] = useState(null)\n  const { type, USstate } = useParams();\n\n  useEffect(() => {\n    console.log(data)\n    console.log(USstate)\n  }, [])\n\n  useEffect(() => {\n    let siteCodesArray = []\n    for (let item of data) {\n      if (!siteCodesArray.includes(item.sitecode))\n      siteCodesArray.push(item.sitecode)\n    }\n\n\n    const siteCodes = []\n    const getParkData = async () => {\n      console.log(siteCodesArray)\n      for (let item of siteCodesArray) {\n        const latLng = await NParksServiceRequest.getParkLatLong(item)\n        siteCodes.push(\n          {\n            'code' : item,\n            'lat' : latLng.latitude,\n            'lon': latLng.longitude\n          }\n        )\n      }\n\n      console.log(siteCodes)\n      setSiteCodesData(siteCodes)\n    \n    }   \n    getParkData()\n  }, [data])\n\n  function convertDate(dateStr) {\n    const date = new Date(dateStr);\n    const options = { year: 'numeric', month: 'long', day: 'numeric' };\n    const formattedDate = date.toLocaleDateString('en-US', options);\n    const [month, day, year] = formattedDate.split(' ');\n    return { month: month, day: parseInt(day), year: parseInt(year) };\n  }\n\n\n  return (\n    <div id=\"events-main-container\">\n      <h1>Events in {stateName}</h1>\n      {data && siteCodesData && data.map(item => {\n\n        let formattedDate = convertDate(item.date)\n\n        let location = siteCodesData.find(l => l.code === item.sitecode);\n        let lat = location.lat\n        let lon = location.lon\n\n        return (\n          <div key={item.id} className=\"events-item-container\">\n            <div className=\"events-item-date\">\n              <p className=\"event-month\">{formattedDate.month}</p>\n              <p className=\"event-day\">{formattedDate.day}</p>\n              <p className=\"event-year\">{formattedDate.year}</p>\n              <hr></hr>\n              <p className=\"event-times\">{item.times[0].timestart}</p>\n              <div className=\"add-to-trip-dropdown\">\n                {/* <AddToTripDropdown\n                  type='event'\n                  route={`/supplemental/${type}/${USstate}`}\n                  name={item.title}\n                  description={item.description}\n                  parkcode={item.sitecode}\n                  latitude={lat}\n                  longitude={lon}\n                /> */}\n              </div>\n            </div>\n            <div className=\"events-item-container-main\">\n              {item.images.length>0\n                ? <div className=\"events-item-image-container\">\n                  <img src={`https://www.nps.gov${item.images[0].url}`}></img>\n                </div>\n                : <div\n                  className=\"events-item-image-container\">\n                    <img src={require('../images/black.png')}></img>\n                    <p>no image</p>\n                  </div>\n              }\n              <h4>{item.title}</h4>\n              <p>{item.parkfullname}</p>\n              {item.location\n                ? <p><b>Location:</b> {item.location}</p>\n                : <p><b>Location:</b> See details</p>\n              }\n              <p className=\"event-times\"><b>Time:</b> {item.times[0].timestart} - {item.times[0].timeend}</p>\n              {item.timeinfo\n                ? <>\n                    <hr></hr>\n                    <p>Time details: {item.timeinfo}</p>\n                  </>\n                : <p></p>\n              }\n            </div>\n            <div className=\"events-item-container-other\">\n              \n              {item.isfree\n                ? <p><b>Cost:</b> Free</p>\n                : <p><b>Cost:</b> Not Free</p>\n              }\n              <p><b>Category:</b> {item.category}</p>\n              <p>\n                <b>Types:</b>{\" \"}\n                {item.types && (\n                  <span>{item.types.join(\", \")}</span>\n                )}\n              </p>\n            </div>\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n\nexport default Events;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}