{"ast":null,"code":"import _regeneratorRuntime from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useNavigate}from'react-router-dom';import BackendApiRequest from\"../apis/backendApi\";import useLocalStorage from\"../hooks/useLocalStorage\";import NavBar from\"../NavBar\";import{AxiosError}from\"axios\";import'../css/LoginForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LoginForm=function LoginForm(_ref){var token=_ref.token,setToken=_ref.setToken;var _useLocalStorage=useLocalStorage(),_useLocalStorage2=_slicedToArray(_useLocalStorage,4),localStoreToken=_useLocalStorage2[0],localRemoveToken=_useLocalStorage2[1],localRetrieveToken=_useLocalStorage2[2],localDecodeTokenn=_useLocalStorage2[3];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var navigate=useNavigate();var INITIAL_STATE={'username':'','password':''};var _useState3=useState(INITIAL_STATE),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var handleChange=function handleChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setFormData(function(data){return _objectSpread(_objectSpread({},data),{},_defineProperty({},name,value));});};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(evt){var request,_token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:evt.preventDefault();_context.next=3;return BackendApiRequest.login(formData);case 3:request=_context.sent;console.log(request);if(!(request instanceof AxiosError)){_context.next=10;break;}setError('Invalid username or password');return _context.abrupt(\"return\",'error');case 10:_token=request.data.token;setToken(_token);localStoreToken(_token);setFormData(INITIAL_STATE);navigate('/');case 15:case\"end\":return _context.stop();}},_callee);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{id:\"login-form-main-container\",children:[/*#__PURE__*/_jsx(NavBar,{token:token,setToken:setToken}),/*#__PURE__*/_jsx(\"div\",{id:\"form-inner-container\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"form-container\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Log In\"}),error?/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Login error:\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{required:true,id:formData.username,type:\"text\",name:\"username\"// placeholder=\"username\"\n,value:formData.username,onChange:handleChange,className:\"col-md-6\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"label\",children:\"username\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{required:true,id:formData.password,type:\"text\",name:\"password\"// placeholder=\"password\"\n,value:formData.password,onChange:handleChange,className:\"col-md-6\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"label\",children:\"password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{id:\"submit-button\",children:\"Submit\"})]})]})})]});};export default LoginForm;","map":{"version":3,"names":["React","useState","useNavigate","BackendApiRequest","useLocalStorage","NavBar","AxiosError","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginForm","_ref","token","setToken","_useLocalStorage","_useLocalStorage2","_slicedToArray","localStoreToken","localRemoveToken","localRetrieveToken","localDecodeTokenn","_useState","_useState2","error","setError","navigate","INITIAL_STATE","_useState3","_useState4","formData","setFormData","handleChange","evt","_evt$target","target","name","value","data","_objectSpread","_defineProperty","handleSubmit","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","request","_token","wrap","_callee$","_context","prev","next","preventDefault","login","sent","console","log","abrupt","stop","_x","apply","arguments","id","children","className","onSubmit","required","username","type","onChange","htmlFor","password"],"sources":["/Users/josephlarrivy/software-engineering/springboard/assignments/capstone-2-rework/client/src/forms/LoginForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from 'react-router-dom';\n\nimport BackendApiRequest from \"../apis/backendApi\";\nimport useLocalStorage from \"../hooks/useLocalStorage\";\nimport NavBar from \"../NavBar\";\n\nimport { AxiosError } from \"axios\";\n\nimport '../css/LoginForm.css'\n\nconst LoginForm = ({ token, setToken }) => {\n\n  const [localStoreToken, localRemoveToken, localRetrieveToken, localDecodeTokenn] = useLocalStorage()\n  const [error, setError] = useState(null)\n\n\n  const navigate = useNavigate();\n\n\n  const INITIAL_STATE = {\n    'username': '',\n    'password': '',\n  }\n  const [formData, setFormData] = useState(INITIAL_STATE)\n\n  const handleChange = evt => {\n    const { name, value } = evt.target;\n    setFormData(data => ({\n      ...data,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = async (evt) => {\n    evt.preventDefault();\n    const request = await BackendApiRequest.login(formData)\n    console.log(request)\n    if (request instanceof AxiosError) {\n      setError('Invalid username or password')\n      return 'error'\n    } else {\n      const token = request.data.token\n      setToken(token)\n      localStoreToken(token)\n      setFormData(INITIAL_STATE)\n      navigate('/')\n    }\n  }\n\n\n\n  return (\n    <div id=\"login-form-main-container\">\n      <NavBar\n        token={token}\n        setToken={setToken}\n      />\n      <div id=\"form-inner-container\">\n        <div id=\"form-container\">\n          <h4>Log In</h4>\n          {error\n            ? <div className=\"error-container\">\n              <p>Login error:</p>\n              <p>{error}</p>\n            </div>\n            : <></>\n          }\n          <form onSubmit={handleSubmit}>\n\n            \n            <input\n              required\n              id={formData.username}\n              type=\"text\"\n              name=\"username\"\n              // placeholder=\"username\"\n              value={formData.username}\n              onChange={handleChange}\n              className=\"col-md-6\"\n            />\n            <label htmlFor=\"username\" className=\"label\">username</label>\n            <br></br><br></br>\n\n            \n            <input\n              required\n              id={formData.password}\n              type=\"text\"\n              name=\"password\"\n              // placeholder=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              className=\"col-md-6\"\n            />\n            <label htmlFor=\"password\" className=\"label\">password</label>\n            <br></br><br></br>\n\n            <button id=\"submit-button\">Submit</button>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default LoginForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}